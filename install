#!/usr/bin/bash

# OPEN TESTING V1 - WHITE-SPACE INSTALLER

echo """

        ┏━━━┓╋╋╋╋╋╋╋╋╋╋┏━━━━┓╋╋╋╋┏┓
        ┃┏━┓┃╋╋╋╋╋╋╋╋╋╋┃┏┓┏┓┃╋╋╋┏┛┗┓
        ┃┃┃┃┣━━┳━━┳━┓╋╋┗┛┃┃┣┻━┳━┻┓┏╋┳━┓┏━━┓
        ┃┃┃┃┃┏┓┃┃━┫┏┓┳━━┓┃┃┃┃━┫━━┫┃┣┫┏┓┫┏┓┃
        ┃┗━┛┃┗┛┃┃━┫┃┃┣━━┛┃┃┃┃━╋━━┃┗┫┃┃┃┃┗┛┃
        ┗━━━┫┏━┻━━┻┛┗┛╋╋╋┗┛┗━━┻━━┻━┻┻┛┗┻━┓┃
        ╋╋╋╋┃┃╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋┏━┛┃
        ╋╋╋╋┗┛╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋╋┗━━┛

                   INSTALLER
                v1 WHITE-SPACE



Pease wait while 0penTesting installs...
"""
# Termux install
if [ "$PREFIX" = "/data/data/com.termux/files/usr" ]; then
    pkg install -y git python3 python3-pip
    pip3 install -r app/dist/requirements.txt
    echo "Making files executable..."
	chmod +x app/0pentesting-framework.py
	chmod +x app/dist/0pf
	chmod +x app/web_app/webserver.py
	chmod +x app/web_app/debug_webserver.py
	chmod +x app/dist/start_webserver.py
	chmod +x app/dist/update_mgr.py
	mv app/dist/0pf ../../


# MacOS install
elif [ "$(uname)" = "Darwin" ]; then
	INSTALL_DIR="/usr/local/0penTesting-Framework"
    BIN_DIR="/usr/local/bin"
    BASH_PATH="/bin/bash"
    TERMUX=false

# Deb-based Linux install
else
    sudo apt-get install -y git python3 python3-pip
	echo "Installing apt's..."
	sudo apt-get install -y python3 python3-pip 
	echo "Installing pip's..."
	pip3 install -r app/dist/requirements.txt
	echo "Making files executable..."
	chmod +x app/0pentesting-framework.py
	chmod +x app/dist/0pf
	chmod +x app/web_app/webserver.py
	chmod +x app/web_app/debug_webserver.py
	chmod +x app/dist/start_webserver.py
	chmod +x app/dist/update_mgr.sh
	sudo mv app/dist/0pf ../../
	alias 0pf="bash $PWD/0pf"
fi

echo "Tool installed successfully! To get started restart the terminal sesh and type: 0pf";
